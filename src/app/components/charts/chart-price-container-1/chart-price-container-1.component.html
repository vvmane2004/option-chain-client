<div class="chart-price-container-1">
  <!-- Chart Header -->
  <div class="chart-header">
    <h3>Price with Bollinger Bands & Keltner Channels</h3>
    <div class="chart-actions">
      <button class="refresh-btn" (click)="loadData()" [disabled]="loading">
        <span *ngIf="loading" class="loading-spinner"></span>
        {{ loading ? 'Loading...' : 'Refresh' }}
      </button>
    </div>
  </div>

  <!-- Loading State -->
  <div class="loading-state" *ngIf="loading">
    <div class="loading-spinner"></div>
    <p>Loading underlying price data...</p>
  </div>

  <!-- Error State -->
  <div class="error-state" *ngIf="error">
    <div class="error-icon">‚ö†Ô∏è</div>
    <p>{{ error }}</p>
    <button class="retry-btn" (click)="loadData()">Retry</button>
  </div>

  <!-- No Data State -->
  <div class="no-data-state" *ngIf="!loading && !error && (!data || data.length === 0)">
    <div class="no-data-icon">üìà</div>
    <p>No underlying price data available</p>
  </div>

  <!-- Price Chart with Bollinger Bands & Keltner Channels -->
  <div class="chart-wrapper" *ngIf="!loading && !error && data && data.length > 0">
    <app-chart-bollinger-keltner
      [priceData]="priceData"
      [dates]="chartDates"
      [symbol]="symbol || ''"
      [bollingerPeriod]="20"
      [bollingerStdDev]="2"
      [keltnerPeriod]="20"
      [keltnerMultiplier]="2"
      (bollingerInfoChange)="onBollingerInfoChange($event)"
      (keltnerInfoChange)="onKeltnerInfoChange($event)">
    </app-chart-bollinger-keltner>
  </div>

  <!-- RSI Chart -->
  <div class="rsi-chart-wrapper" *ngIf="!loading && !error && data && data.length > 0">
    <app-chart-rsi 
      [priceData]="priceData" 
      [dates]="chartDates" 
      [period]="14"
      [overbought]="70"
      [oversold]="30"
      (rsiInfoChange)="onRsiInfoChange($event)">
    </app-chart-rsi>
  </div>

  <!-- MACD Chart -->
  <div class="macd-chart-wrapper" *ngIf="!loading && !error && data && data.length > 0">
    <app-chart-macd 
      [priceData]="priceData" 
      [dates]="chartDates" 
      [fastPeriod]="12"
      [slowPeriod]="26"
      [signalPeriod]="9"
      (macdInfoChange)="onMacdInfoChange($event)">
    </app-chart-macd>
  </div>

  <!-- Data Summary -->
  <div class="data-summary" *ngIf="data && data.length > 0">
    <div class="summary-item">
      <span class="label">Data Points:</span>
      <span class="value">{{ data.length }}</span>
    </div>
    <div class="summary-item">
      <span class="label">Price Range:</span>
      <span class="value">{{ getPriceRange() }}</span>
    </div>
    <div class="summary-item">
      <span class="label">Date Range:</span>
      <span class="value">{{ getDateRange() }}</span>
    </div>
    <div class="summary-item bollinger-info">
      <span class="label">Bollinger Bands (20,2):</span>
      <span class="value">{{ bollingerInfo }}</span>
    </div>
    <div class="summary-item keltner-info">
      <span class="label">Keltner Channels (20,2):</span>
      <span class="value">{{ keltnerInfo }}</span>
    </div>
    <div class="summary-item macd-info">
      <span class="label">MACD (12,26,9):</span>
      <span class="value">{{ macdInfo }}</span>
    </div>
    <div class="summary-item rsi-info">
      <span class="label">RSI (14):</span>
      <span class="value">{{ rsiInfo }}</span>
    </div>
  </div>
</div>

